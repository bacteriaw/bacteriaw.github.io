document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("sendCodeBtn"),t=document.getElementById("loginForm");function n(e,t="android_app",n=""){const o=String(Date.now()),a=`appSecret=${"android_app"===t?"nFU9pbG8YQoAe1kFh+E7eyrdlSLglwEJeA0wwHB1j5o=":"Ew+ZSuppXZoA9YzBHgHmRvzt0Bw1CpwlQQtSl49QNhY="}&channel=${t}&timestamp=${o}&token=${n}&version=1.57.2&${e.substring(e.indexOf("/",e.indexOf("https://")+8))}`;return{sign:CryptoJS.SHA256(a).toString(CryptoJS.enc.Hex),timestamp:o}}e.addEventListener("click",(async()=>{try{const e=document.getElementById("phone").value;if(/^1[3-9]\d{9}$/.test(e)){const t=await async function(e){const t="https://userapi.qiekj.com/common/sms/sendCode",{sign:o,timestamp:a}=n(t),i={method:"POST",headers:{"User-Agent":"okhttp/3.14.9","Content-Type":"application/x-www-form-urlencoded",Accept:"application/json, text/plain, */*",Version:"1.57.2",channel:"android_app",sign:o,timestamp:a},body:`phone=${e}&template=reg`},s=await fetch(t,i);return s.json()}(e);alert(JSON.stringify(t))}else alert("请输入正确的手机号码")}catch(e){alert(e)}})),t.addEventListener("submit",(async e=>{e.preventDefault();try{const e=document.getElementById("phone").value,t=document.getElementById("verificationCode").value;if(t){const o=await async function(e,t){const o="https://userapi.qiekj.com/user/reg",{sign:a,timestamp:i}=n(o),s={method:"POST",headers:{"User-Agent":"okhttp/3.14.9","Content-Type":"application/x-www-form-urlencoded",Accept:"application/json, text/plain, */*",Version:"1.57.2",channel:"android_app",sign:a,timestamp:i},body:`channel=android_app&phone=${e}&verify=${t}`},r=await fetch(o,s);return r.json()}(e,t);o?.data?.token?alert("获取到的token如下:\n"+o.data.token):alert("获取token失败！请联系客服处理～\n"+JSON.stringify(o))}else alert("请输入验证码")}catch(e){alert(e)}}))}));
